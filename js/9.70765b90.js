(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{da0b:function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("q-item-label",{staticClass:"text-h5"},[a._v("\n    Dados Pessoais\n  ")]),e("div",{staticClass:"row q-mt-lg"},[e("div",{staticClass:"col-12 col-sm"},[e("q-input",{staticClass:"q-mr-lg",attrs:{disable:"",label:"Nome completo"},model:{value:a.cadastroPerfil.nome,callback:function(t){a.$set(a.cadastroPerfil,"nome",t)},expression:"cadastroPerfil.nome"}})],1),e("div",{staticClass:"col-12 col-sm"},[e("q-input",{attrs:{disable:"",label:"CPF",mask:"###.###.###-##"},model:{value:a.cadastroPerfil.cpf,callback:function(t){a.$set(a.cadastroPerfil,"cpf",t)},expression:"cadastroPerfil.cpf"}})],1)]),e("div",{staticClass:"row q-mt-lg"},[e("div",{staticClass:"col-12 col-sm"},[e("q-input",{staticClass:"q-mr-lg",attrs:{label:"E-mail"},model:{value:a.cadastroPerfil.email,callback:function(t){a.$set(a.cadastroPerfil,"email",t)},expression:"cadastroPerfil.email"}})],1),e("div",{staticClass:"col-12 col-sm"},[e("q-input",{attrs:{label:"Data de nascimento",mask:"##/##/####",rules:[this.isDataVencimento]},model:{value:a.cadastroPerfil.dat_nasc,callback:function(t){a.$set(a.cadastroPerfil,"dat_nasc",t)},expression:"cadastroPerfil.dat_nasc"}})],1)]),e("div",{staticClass:"row q-mt-lg"},[e("div",{staticClass:"col-12 col-sm"},[e("q-input",{staticClass:"q-mr-lg",attrs:{label:"Celular principal",mask:"(##) ##### - ####"},model:{value:a.cadastroPerfil.tel_cel1,callback:function(t){a.$set(a.cadastroPerfil,"tel_cel1",t)},expression:"cadastroPerfil.tel_cel1"}})],1),e("div",{staticClass:"col-12 col-sm"},[e("q-input",{attrs:{label:"Celular secundário",mask:"(##) ##### - ####"},model:{value:a.cadastroPerfil.tel_cel2,callback:function(t){a.$set(a.cadastroPerfil,"tel_cel2",t)},expression:"cadastroPerfil.tel_cel2"}})],1)]),e("div",{staticClass:"col q-mt-xl"},[e("q-btn",{attrs:{color:"black",label:"Salvar"},on:{click:function(t){return a.confirmaSalvar()}}})],1),e("q-dialog",{attrs:{persistent:""},model:{value:a.confirm,callback:function(t){a.confirm=t},expression:"confirm"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"announcement",color:"primary","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[a._v("Deseja salvar os dados?")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Sim",color:"primary"},on:{click:function(t){return a.salvarDadosPessoais()}}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Não",color:"primary"}})],1)],1)],1)],1)},l=[],c=(e("5319"),e("bc3a")),o=e.n(c);const i={nome:"",email:"",cpf:"",tel_cel1:"",tel_cel2:"",dat_nasc:"",status:"ativo",pontuacao:"5"};var r={name:"ComponentDadosPessoais",data(){return{baseUrl:"https://power-bag-back.herokuapp.com",cadastroPerfil:i,mostrarDadosPessoais:!0,confirm:!1,identificacao:["Sra","Sr"],token:localStorage.getItem("token"),clienteId:localStorage.getItem("clienteId")}},mounted(){this.buscardados()},methods:{isDataVencimento(a){a=a.replace(/\//g,"-");var t=a.split("-");4!=t[0].length&&(a=t[2]+"-"+t[1]+"-"+t[0]);var e=new Date,s=new Date(a),l=e.getFullYear()-s.getFullYear(),c=e.getMonth()-s.getMonth();return(c<0||0===c&&e.getDate()<s.getDate())&&l--,l<18||l>=90?"Data inválida":void 0},confirmaSalvar(){this.confirm=!0},salvarDadosPessoais(){o()({method:"PUT",url:`${this.baseUrl}/cliente/${this.clienteId}`,data:{email:this.cadastroPerfil.email,tel_cel1:this.cadastroPerfil.tel_cel1,tel_cel2:this.cadastroPerfil.tel_cel2,dat_nasc:this.cadastroPerfil.dat_nasc}}),setTimeout((()=>{this.$q.dialog({title:"Parabéns!",message:"Dados salvo com sucesso!"}),this.buscardados()}),500)},async buscardados(){this.cadastroPerfil.nome=localStorage.getItem("nome"),this.cadastroPerfil.cpf=localStorage.getItem("cpf");const a=await o()({method:"GET",url:`${this.baseUrl}/cliente/${this.clienteId}`,headers:{Authorization:`Basic ${this.token}`}}),t=Object.assign(this.cadastroPerfil,a.data);this.cadastroPerfil.email=t.email}}},n=r,d=e("2877"),m=e("0170"),f=e("27f9"),u=e("9c40"),p=e("24e8"),b=e("f09f"),v=e("a370"),P=e("cb32"),h=e("4b7e"),g=e("7f67"),q=e("eebe"),C=e.n(q),_=Object(d["a"])(n,s,l,!1,null,null,null);t["default"]=_.exports;C()(_,"components",{QItemLabel:m["a"],QInput:f["a"],QBtn:u["a"],QDialog:p["a"],QCard:b["a"],QCardSection:v["a"],QAvatar:P["a"],QCardActions:h["a"]}),C()(_,"directives",{ClosePopup:g["a"]})}}]);