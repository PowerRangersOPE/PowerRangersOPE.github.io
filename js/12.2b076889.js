(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{f810:function(a,t,e){"use strict";e.r(t);var o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",[e("div",{staticClass:"col q-mb-md"},[e("q-btn",{attrs:{color:"green",label:"Solicitar nova Bag"},on:{click:function(t){return a.confirmarPedido()}}})],1)]),e("div",[e("q-table",{staticClass:"col",attrs:{dense:a.$q.screen.lt.lg,data:a.bag,columns:a.columns,"row-key":"id","rows-per-page-options":[10]},scopedSlots:a._u([{key:"body-cell-action",fn:function(t){return[e("q-td",{attrs:{props:t}},[e("div",["Recebido"!==t.row.status?e("q-btn",{attrs:{icon:"published_with_changes",color:"info",size:"sm",dense:"",disable:""},on:{click:function(e){return a.abrirModalAlterarStatus(t.row.id)}}}):e("q-btn",{attrs:{icon:"published_with_changes",color:"info",size:"sm",dense:""},on:{click:function(e){return a.abrirModalAlterarStatus(t.row.id)}}})],1)])]}},{key:"body-cell-feedback",fn:function(t){return[e("q-td",{attrs:{props:t}},[e("div",["Compra total"===t.row.status||"Finalizado"===t.row.status?e("q-btn",{attrs:{icon:"chat",color:"info",size:"sm",dense:""},on:{click:function(e){return a.abrirModalFeedback(t.row.observacoes)}}}):e("q-btn",{attrs:{icon:"chat",color:"info",size:"sm",dense:"",disable:""}})],1)])]}}])})],1),e("q-dialog",{attrs:{persistent:""},model:{value:a.confirm,callback:function(t){a.confirm=t},expression:"confirm"}},[e("q-card",[e("q-card-section",{staticClass:"row items-center"},[e("q-avatar",{attrs:{icon:"announcement",color:"primary","text-color":"white"}}),e("span",{staticClass:"q-ml-sm"},[a._v("Deseja continuar com a solicitação da Bag?\n        ")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Sim",color:"primary"},on:{click:function(t){return a.solicitarBag()}}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Não",color:"primary"}})],1)],1)],1),e("q-dialog",{model:{value:a.modalAlterarStatus,callback:function(t){a.modalAlterarStatus=t},expression:"modalAlterarStatus"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[a._v("Alterar Status da Bag")])]),e("q-card-section",{staticClass:"q-pt-none"},[e("li",[a._v("Compra total: Irá ficar com todos itens da Bag")]),e("br"),e("li",[a._v("Solicitado a retirada: Deseja devolver itens da Bag")])]),e("div",{staticClass:"q-pa-md"},[e("div",{staticClass:"q-gutter-y-md column",staticStyle:{"max-width":"500px"}},[e("q-select",{attrs:{clearable:"",filled:"",color:"purple-12",options:a.options,label:"Escolha status"},model:{value:a.novoStatusBag,callback:function(t){a.novoStatusBag=t},expression:"novoStatusBag"}})],1)]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Salvar",color:"primary"},on:{click:function(t){return a.alterarStatusBag()}}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1),e("q-dialog",{model:{value:a.modalFeedback,callback:function(t){a.modalFeedback=t},expression:"modalFeedback"}},[e("q-card",[e("q-card-section",[e("div",{staticClass:"text-h6"},[a._v("Deixe um Feedback para o nosso atendimento")])]),e("div",{staticClass:"q-pa-md"},[e("q-input",{attrs:{filled:"",clearable:"",type:"textarea",color:"red-12",label:"Seu feedback"},model:{value:a.textFeedback,callback:function(t){a.textFeedback=t},expression:"textFeedback"}})],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Salvar",color:"primary"},on:{click:function(t){return a.feedbackBag()}}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1)],1)},s=[],r=(e("5319"),e("bc3a")),i=e.n(r),l={name:"minhasBags",data:()=>({token:localStorage.getItem("token"),baseUrl:"https://power-bag-back.herokuapp.com",confirm:!1,columns:[{name:"createdAt",label:"Data",field:"createdAt",sortable:!0,type:"date",align:"center",width:"auto",headerClasses:"bg-primary text-white text-uppercase",format:a=>`${a.replace(/(\d*)-(\d*)-(\d*).*/,"$3-$2-$1")}`},{name:"status",label:"Status",field:"status",align:"center",width:"auto",headerClasses:"bg-primary text-white text-uppercase text-bold"},{name:"valor",label:"Valor",field:"valor",align:"center",width:"auto",headerClasses:"bg-primary text-white text-uppercase text-bold"},{name:"action",label:"Alterar Status da BAG",align:"center",width:"auto",headerClasses:"bg-primary text-white text-uppercase text-bold "},{name:"feedback",label:"Feedback",align:"center",width:"auto",headerClasses:"bg-primary text-white text-uppercase text-bold "}],bag:[],model:null,options:["Compra total","Solicitado a retirada"],selected:[],modalCartao:!1,modalAlterarStatus:!1,modalFeedback:!1,idBagAtual:null,novoStatusBag:null,textFeedback:""}),computed:{buttonColor(){return this.$q.screen.lt.md?"primary":"secondary"}},mounted(){this.buscarBags()},methods:{confirmarPedido(){this.confirm=!0},async solicitarBag(){const a=await i()({method:"GET",url:`${this.baseUrl}/cliente/validate`,headers:{Authorization:`${this.token}`}}),t=a.data.reason;return"solicitacao em aberto"===t?(this.$q.dialog({title:"Atenção!",message:"Para solicitar nova Bag é necessário é necessário aguardar a finalização do último pedido"}),!1):"dados cadastrais"===t?(this.$q.dialog({title:"Atenção!",message:"Para solicitar a Bag é necessário ter todos os cadastros preenchidos"}),!1):(i()({method:"POST",url:`${this.baseUrl}/bag`,headers:{Authorization:`${this.token}`}}).then((a=>{localStorage.setItem("bag",JSON.stringify(a.data))})),void setTimeout((()=>{this.$q.dialog({title:"Parabéns!!!",message:"Sua bag foi solicitada com sucesso!"}),this.buscarBags()}),500))},async buscarBags(){const a=await i()({method:"GET",url:`${this.baseUrl}/bag/detail`,headers:{Authorization:`${this.token}`}});this.bag=Object.assign(a.data)},abrirModalAlterarStatus(a){this.modalAlterarStatus=!0,this.idBagAtual=a},alterarStatusBag(){i()({method:"PUT",url:`${this.baseUrl}/bag`,headers:{Authorization:`${this.token}`},data:{status:this.novoStatusBag,id_bag:this.idBagAtual}}),setTimeout((()=>{this.$q.dialog({title:"Atenção!",message:"O status da bag foi alterado com sucesso!"}),this.buscarBags()}),500)},abrirModalFeedback(a){console.log(a),this.modalFeedback=!0,this.textFeedback=a},feedbackBag(){i()({method:"PUT",url:`${this.baseUrl}/bag`,headers:{Authorization:`${this.token}`},data:{observacoes:this.textFeedback,id_bag:this.idBagAtual}}),setTimeout((()=>{this.$q.dialog({title:"Atenção!",message:"O seu feedback foi inserido com sucesso!"}),this.buscarBags()}),500)}}},c=l,n=e("2877"),d=e("9c40"),u=e("eaac"),b=e("db86"),m=e("24e8"),p=e("f09f"),g=e("a370"),h=e("cb32"),f=e("4b7e"),v=e("ddd8"),k=e("27f9"),q=e("7f67"),w=e("eebe"),S=e.n(w),x=Object(n["a"])(c,o,s,!1,null,null,null);t["default"]=x.exports;S()(x,"components",{QBtn:d["a"],QTable:u["a"],QTd:b["a"],QDialog:m["a"],QCard:p["a"],QCardSection:g["a"],QAvatar:h["a"],QCardActions:f["a"],QSelect:v["a"],QInput:k["a"]}),S()(x,"directives",{ClosePopup:q["a"]})}}]);