(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"7e2f":function(e,a,o){"use strict";o.r(a);var t=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",[o("q-item-label",{staticClass:"text-h5",staticStyle:{}},[e._v("\n    Endereço\n  ")]),o("div",{staticClass:"row q-mt-lg"},[o("div",{staticClass:"col-12 col-sm"},[o("q-input",{ref:"cep",staticClass:"q-mr-lg",attrs:{label:"CEP",mask:"#####-###",rules:[this.isCep,this.required]},on:{keyup:function(a){return e.searchCep()}},model:{value:e.cadastroEndereco.cep,callback:function(a){e.$set(e.cadastroEndereco,"cep",a)},expression:"cadastroEndereco.cep"}})],1),o("div",{staticClass:"col-12 col-sm"},[o("q-input",{attrs:{label:"UF"},model:{value:e.cadastroEndereco.uf,callback:function(a){e.$set(e.cadastroEndereco,"uf",a)},expression:"cadastroEndereco.uf"}})],1)]),o("div",{staticClass:"row q-mt-lg"},[o("div",{staticClass:"col-12 col-sm"},[o("q-input",{staticClass:"q-mr-lg",attrs:{label:"Cidade"},model:{value:e.cadastroEndereco.cidade,callback:function(a){e.$set(e.cadastroEndereco,"cidade",a)},expression:"cadastroEndereco.cidade"}})],1),o("div",{staticClass:"col-12 col-sm"},[o("q-input",{attrs:{label:"Bairro"},model:{value:e.cadastroEndereco.bairro,callback:function(a){e.$set(e.cadastroEndereco,"bairro",a)},expression:"cadastroEndereco.bairro"}})],1)]),o("div",{staticClass:"row q-mt-lg"},[o("div",{staticClass:"col-12 col-sm"},[o("q-input",{staticClass:"q-mr-lg",attrs:{label:"Rua"},model:{value:e.cadastroEndereco.rua,callback:function(a){e.$set(e.cadastroEndereco,"rua",a)},expression:"cadastroEndereco.rua"}})],1),o("div",{staticClass:"col-12 col-sm"},[o("q-input",{ref:"numero",attrs:{label:"Número",rules:[this.required]},model:{value:e.cadastroEndereco.numero,callback:function(a){e.$set(e.cadastroEndereco,"numero",a)},expression:"cadastroEndereco.numero"}})],1)]),o("div",{staticClass:"row q-mt-lg"},[o("div",{staticClass:"col-12 col-sm"},[o("q-input",{staticClass:"q-mr-lg",attrs:{label:"Complemento"},model:{value:e.cadastroEndereco.complemento,callback:function(a){e.$set(e.cadastroEndereco,"complemento",a)},expression:"cadastroEndereco.complemento"}})],1),o("div",{staticClass:"col-12 col-sm"},[o("q-input",{ref:"observacoes",attrs:{label:"Observações",rules:[this.required]},model:{value:e.cadastroEndereco.observacoes,callback:function(a){e.$set(e.cadastroEndereco,"observacoes",a)},expression:"cadastroEndereco.observacoes"}})],1)]),o("div",{staticClass:"col q-mt-xl"},[o("q-btn",{attrs:{color:"black",label:"Salvar"},on:{click:function(a){return e.confirmaSalvar()}}})],1),o("q-dialog",{attrs:{persistent:""},model:{value:e.confirm,callback:function(a){e.confirm=a},expression:"confirm"}},[o("q-card",[o("q-card-section",{staticClass:"row items-center"},[o("q-avatar",{attrs:{icon:"announcement",color:"primary","text-color":"white"}}),o("span",{staticClass:"q-ml-sm"},[e._v("Deseja salvar os dados?")])],1),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Sim",color:"primary"},on:{click:function(a){return e.salvar()}}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Não",color:"primary"}})],1)],1)],1)],1)},r=[],s=o("bc3a"),c=o.n(s);const i={rua:"",numero:"",bairro:"",cidade:"",uf:"",cep:"",complemento:"n/a",observacoes:"n/a"};var n={name:"endereco",data(){return{cadastroEndereco:i,baseUrl:"https://power-bag-back.herokuapp.com",token:localStorage.getItem("token"),clienteId:localStorage.getItem("clienteId"),confirm:!1}},mounted(){this.buscarDados(),this.confirmarUsuarioAdmin()},methods:{required(e){return e&&e.length>0||"O campo deve ser preenchido"},short(e){return e&&e.length>3||"Mínimo 4 caracters"},isCep(e){return e&&e.length>3||"Por favor digite cep válido"},confirmaSalvar(){this.confirm=!0},salvar(){if(this.$q.loading.show(),this.$refs.cep.validate(),this.$refs.numero.validate(),this.$refs.observacoes.validate(),this.$refs.cep.hasError||this.$refs.numero.hasError||this.$refs.observacoes.hasError)return this.$q.dialog({title:"Atenção",message:"Dados preenchidos incorretamente."}),void this.$q.loading.hide();let e=localStorage.getItem("token");try{c()({method:"POST",url:`${this.baseUrl}/endereco`,headers:{Authorization:`${e}`},data:{rua:this.cadastroEndereco.rua,numero:this.cadastroEndereco.numero,bairro:this.cadastroEndereco.bairro,cidade:this.cadastroEndereco.cidade,uf:this.cadastroEndereco.uf,cep:this.cadastroEndereco.cep,complemento:this.cadastroEndereco.complemento,observacoes:this.cadastroEndereco.observacoes}}),setTimeout((()=>{this.$q.dialog({title:"Parabéns!",message:"Dados salvo com sucesso!"}),this.$q.loading.hide(),this.buscarDados()}),500)}catch(a){this.$q.dialog({title:"Atenção",message:"Erro ao tentar salvar."}),this.$q.loading.hide()}},async buscarDados(){const e=await c()({method:"GET",url:`${this.baseUrl}/endereco`,headers:{Authorization:`${this.token}`}}),a=Object.assign(this.cadastroEndereco,e.data);this.cadastroEndereco=a},async searchCep(){if(9===this.cadastroEndereco.cep.length)try{const{data:e}=await c.a.get(`https://viacep.com.br/ws/${this.cadastroEndereco.cep}/json/`);this.cadastroEndereco=e,this.cadastroEndereco.uf=e.uf,this.cadastroEndereco.cidade=e.localidade,this.cadastroEndereco.bairro=e.bairro,this.cadastroEndereco.rua=e.logradouro,this.cadastroEndereco.complemento=e.complemento}catch(e){console.log(e)}},confirmarUsuarioAdmin(){let e=localStorage.getItem("admin");"true"===e&&(localStorage.clear(),this.$router.push({name:"home"}))}}},l=n,d=o("2877"),m=o("0170"),u=o("27f9"),p=o("9c40"),h=o("24e8"),b=o("f09f"),v=o("a370"),f=o("cb32"),E=o("4b7e"),g=o("7f67"),q=o("eebe"),C=o.n(q),$=Object(d["a"])(l,t,r,!1,null,null,null);a["default"]=$.exports;C()($,"components",{QItemLabel:m["a"],QInput:u["a"],QBtn:p["a"],QDialog:h["a"],QCard:b["a"],QCardSection:v["a"],QAvatar:f["a"],QCardActions:E["a"]}),C()($,"directives",{ClosePopup:g["a"]})}}]);