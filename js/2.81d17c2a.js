(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{1:function(t,a){},10:function(t,a){},2:function(t,a){},3:function(t,a){},"3d4e":function(t,a,e){"use strict";e("467a")},4:function(t,a){},"44d8":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"q-ma-md col-7"},[e("div",{staticClass:"wrapper",attrs:{id:"app"}},[e("div",{staticClass:"card-form"},[e("div",{staticClass:"card-list"},[e("div",{staticClass:"card-item",class:{"-active":t.isCardFlipped}},[e("div",{staticClass:"card-item__side -front"},[e("div",{ref:"focusElement",staticClass:"card-item__focus",class:{"-active":t.focusElementStyle},style:t.focusElementStyle}),e("div",{staticClass:"card-item__cover"},[e("img",{staticClass:"card-item__bg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.currentCardBackground+".jpeg"}})]),e("div",{staticClass:"card-item__wrapper"},[e("div",{staticClass:"card-item__top"},[e("img",{staticClass:"card-item__chip",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/chip.png"}}),e("div",{staticClass:"card-item__type"},[e("transition",{attrs:{name:"slide-fade-up"}},[t.getCardType?e("img",{key:t.getCardType,staticClass:"card-item__typeImg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.getCardType+".png",alt:""}}):t._e()])],1)]),e("label",{ref:"cardNumber",staticClass:"card-item__number",attrs:{for:"cardNumber"}},["amex"===t.getCardType?t._l(t.amexCardMask,(function(a,r){return e("span",{key:r},[e("transition",{attrs:{name:"slide-fade-up"}},[r>4&&r<14&&t.cardNumber.length>r&&""!==a.trim()?e("div",{staticClass:"card-item__numberItem"},[t._v("*")]):t.cardNumber.length>r?e("div",{key:r,staticClass:"card-item__numberItem",class:{"-active":""===a.trim()}},[t._v("\n                        "+t._s(t.cardNumber[r])+"\n                      ")]):e("div",{key:r+1,staticClass:"card-item__numberItem",class:{"-active":""===a.trim()}},[t._v(t._s(a))])])],1)})):t._l(t.otherCardMask,(function(a,r){return e("span",{key:r},[e("transition",{attrs:{name:"slide-fade-up"}},[r>4&&r<15&&t.cardNumber.length>r&&""!==a.trim()?e("div",{staticClass:"card-item__numberItem"},[t._v("*")]):t.cardNumber.length>r?e("div",{key:r,staticClass:"card-item__numberItem",class:{"-active":""===a.trim()}},[t._v("\n                          "+t._s(t.cardNumber[r])+"\n                        ")]):e("div",{key:r+1,staticClass:"card-item__numberItem",class:{"-active":""===a.trim()}},[t._v(t._s(a))])])],1)}))],2),e("div",{staticClass:"card-item__content"},[e("label",{ref:"cardName",staticClass:"card-item__info",attrs:{for:"cardName"}},[e("div",{staticClass:"card-item__holder"},[t._v("Titular Do Cartão")]),e("transition",{attrs:{name:"slide-fade-up"}},[t.cardName.length?e("div",{key:"1",staticClass:"card-item__name"},[e("transition-group",{attrs:{name:"slide-fade-right"}},t._l(t.cardName.replace(/\s\s+/g," "),(function(a,r){return e("span",{key:r+1,staticClass:"card-item__nameItem",attrs:{"v-if":r===r}},[t._v(t._s(a))])})),0)],1):e("div",{key:"2",staticClass:"card-item__name"},[t._v("Nome Completo")])])],1),e("div",{ref:"cardDate",staticClass:"card-item__date"},[e("label",{staticClass:"card-item__dateTitle",attrs:{for:"cardMonth"}},[t._v("Validade")]),e("label",{staticClass:"card-item__dateItem",attrs:{for:"cardMonth"}},[e("transition",{attrs:{name:"slide-fade-up"}},[t.cardMonth?e("span",{key:t.cardMonth},[t._v(t._s(t.cardMonth))]):e("span",{key:"2"},[t._v("MM")])])],1),t._v("\n                    /\n                    "),e("label",{staticClass:"card-item__dateItem",attrs:{for:"cardYear"}},[e("transition",{attrs:{name:"slide-fade-up"}},[t.cardYear?e("span",{key:t.cardYear},[t._v(t._s(String(t.cardYear).slice(2,4)))]):e("span",{key:"2"},[t._v("YY")])])],1)])])])]),e("div",{staticClass:"card-item__side -back"},[e("div",{staticClass:"card-item__cover"},[e("img",{staticClass:"card-item__bg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.currentCardBackground+".jpeg"}})]),e("div",{staticClass:"card-item__band"}),e("div",{staticClass:"card-item__cvv"},[e("div",{staticClass:"card-item__cvvTitle"},[t._v("CVV")]),e("div",{staticClass:"card-item__cvvBand"},t._l(t.cardCvv,(function(a,r){return e("span",{key:r},[t._v("\n                      *\n                    ")])})),0),e("div",{staticClass:"card-item__type"},[t.getCardType?e("img",{staticClass:"card-item__typeImg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.getCardType+".png"}}):t._e()])])])])]),e("div",{staticClass:"card-form__inner"},[e("div",{staticClass:"card-input"},[e("label",{staticClass:"card-input__label",attrs:{for:"cardNumber"}}),t._v("Numero do Cartão\n            "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cardNumber,expression:"cardNumber"}],staticClass:"card-input__input",attrs:{type:"text",id:"cardNumber","v-mask":t.generateCardNumberMask,"data-ref":"cardNumber",autocomplete:"off"},domProps:{value:t.cardNumber},on:{focus:t.focusInput,blur:t.blurInput,input:function(a){a.target.composing||(t.cardNumber=a.target.value)}}})]),e("div",{staticClass:"card-input"},[e("label",{staticClass:"card-input__label",attrs:{for:"cardName"}},[t._v("Nome Impresso no Cartão")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cardName,expression:"cardName"}],staticClass:"card-input__input",attrs:{type:"text",id:"cardName","data-ref":"cardName",autocomplete:"off"},domProps:{value:t.cardName},on:{focus:t.focusInput,blur:t.blurInput,input:function(a){a.target.composing||(t.cardName=a.target.value)}}})]),e("div",{staticClass:"card-form__row"},[e("div",{staticClass:"card-form__col"},[e("div",{staticClass:"card-form__group"},[e("label",{staticClass:"card-input__label",attrs:{for:"cardMonth"}},[t._v("Data de Validade")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.cardMonth,expression:"cardMonth"}],staticClass:"card-input__input -select",attrs:{id:"cardMonth","data-ref":"cardDate"},on:{focus:t.focusInput,blur:t.blurInput,change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.cardMonth=a.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Mês")]),t._l(12,(function(a){return e("option",{key:a,attrs:{disabled:a<t.minCardMonth},domProps:{value:a<10?"0"+a:a}},[t._v("\n                      "+t._s(10>a?"0"+a:a)+"\n                  ")])}))],2),e("select",{directives:[{name:"model",rawName:"v-model",value:t.cardYear,expression:"cardYear"}],staticClass:"card-input__input -select",attrs:{id:"cardYear","data-ref":"cardDate"},on:{focus:t.focusInput,blur:t.blurInput,change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.cardYear=a.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Ano")]),t._l(12,(function(a,r){return e("option",{key:a,domProps:{value:r+t.minCardYear}},[t._v("\n                      "+t._s(r+t.minCardYear)+"\n                  ")])}))],2)])]),e("div",{staticClass:"card-form__col -cvv"},[e("div",{staticClass:"card-input"},[e("label",{staticClass:"card-input__label",attrs:{for:"cardCvv"}},[t._v("CVV")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cardCvv,expression:"cardCvv"}],staticClass:"card-input__input",attrs:{type:"text",id:"cardCvv","v-mask":"####",maxlength:"4",autocomplete:"off"},domProps:{value:t.cardCvv},on:{focus:function(a){return t.flipCard(!0)},blur:function(a){return t.flipCard(!1)},input:function(a){a.target.composing||(t.cardCvv=a.target.value)}}})])])]),e("button",{staticClass:"card-form__button",on:{click:function(a){return t.card_hash()}}},[t._v("\n            Salvar\n          ")])])])])])},s=[],c=e("b678"),i=e.n(c),d=e("bc3a"),n=e.n(d),o={name:"ComponentCartao",data(){return{currentCardBackground:Math.floor(25*Math.random()+1),cardName:"",cardNumber:"",cardMonth:"",cardYear:"",cardCvv:"",minCardYear:(new Date).getFullYear(),amexCardMask:"#### ###### #####",otherCardMask:"#### #### #### ####",cardNumberTemp:"",isCardFlipped:!1,focusElementStyle:null,isInputFocused:!1,baseUrl:"https://power-bag.herokuapp.com",token:localStorage.getItem("token"),clienteId:localStorage.getItem("clienteId"),confirm:!1}},mounted(){this.cardNumberTemp=this.otherCardMask,document.getElementById("cardNumber").focus(),this.buscarDados()},computed:{getCardType(){let t=this.cardNumber,a=new RegExp("^4");return null!=t.match(a)?"visa":(a=new RegExp("^(34|37)"),null!=t.match(a)?"amex":(a=new RegExp("^5[1-5]"),null!=t.match(a)?"mastercard":(a=new RegExp("^6011"),null!=t.match(a)?"discover":(a=new RegExp("^9792"),null!=t.match(a)?"troy":"visa"))))},generateCardNumberMask(){return"amex"===this.getCardType?this.amexCardMask:this.otherCardMask},minCardMonth(){return this.cardYear===this.minCardYear?(new Date).getMonth()+1:1}},watch:{cardYear(){this.cardMonth<this.minCardMonth&&(this.cardMonth="")}},methods:{card_hash(){const t=this.cardYear.toString().slice(2,4),a={card_number:this.cardNumber.toString(),card_holder_name:this.cardName.toString(),card_expiration_date:this.cardMonth.toString()+"/"+t,card_cvv:this.cardCvv.toString()};console.log(a),i.a.client.connect({encryption_key:"ek_test_8xw1zYHFb3ruE5QXrewbMSKKxjYjzz"}).then((t=>t.security.encrypt(a))).then((t=>{"3"===this.cardNumber.slice(0,1)?n()({method:"POST",url:`${this.baseUrl}/cartao`,headers:{Authorization:`${this.token}`},data:{numero:this.cardNumber.slice(0,4)+"-"+this.cardNumber.slice(14,17),card_hash:t}}):n()({method:"POST",url:`${this.baseUrl}/cartao`,headers:{Authorization:`${this.token}`},data:{numero:this.cardNumber.slice(0,4)+"-"+this.cardNumber.slice(15,19),card_hash:t}}),setTimeout((()=>{this.$q.dialog({title:"Parabéns!",message:"Dados salvo com sucesso!"})}),500)}))},async buscarDados(){const t=await n()({method:"GET",url:`${this.baseUrl}/cliente/${this.clienteId}`,headers:{Authorization:`${this.token}`}}),a=t.data.cartao.numero;if("3"===a.slice(0,1)){const t=a.slice(0,4)+" ****** **"+a.slice(5,8);this.cardNumber=t,this.cardName="******** *******",this.cardCvv="***"}else{const t=a.slice(0,4)+" **** **** "+a.slice(5,9);this.cardNumber=t,this.cardName="******** *******",this.cardCvv="***"}},buscaCartaoAmex(){const t=retornoCartao.slice(0,4)+" "+retornoCartao.slice(4,10)+" "+retornoCartao.slice(10,15);this.cardNumber=t},flipCard(t){this.isCardFlipped=t},focusInput(t){this.isInputFocused=!0;let a=t.target.dataset.ref,e=this.$refs[a];this.focusElementStyle={width:`${e.offsetWidth}px`,height:`${e.offsetHeight}px`,transform:`translateX(${e.offsetLeft}px) translateY(${e.offsetTop}px)`}},blurInput(){let t=this;setTimeout((()=>{t.isInputFocused||(t.focusElementStyle=null)}),300),t.isInputFocused=!1}}},l=o,m=(e("3d4e"),e("2877")),u=Object(m["a"])(l,r,s,!1,null,"01d14cff",null);a["default"]=u.exports},"467a":function(t,a,e){},5:function(t,a){},6:function(t,a){},7:function(t,a){},8:function(t,a){},9:function(t,a){}}]);