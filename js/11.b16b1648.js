(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"497b":function(a,e,t){"use strict";t.r(e);var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("div",{staticClass:"q-pa-md"},[t("q-table",{staticClass:"col",attrs:{dense:"",data:a.bag,columns:a.columns,"row-key":"id","rows-per-page-options":[50]},scopedSlots:a._u([{key:"body-cell-editarPedido",fn:function(e){return[t("q-td",{attrs:{props:e}},[t("div",["Cancelado"===e.row.status||"Finalizado"===e.row.status||"Compra total"===e.row.status?t("q-btn",{attrs:{icon:"published_with_changes",color:"grey",size:"sm",dense:"",disable:""}}):t("q-btn",{attrs:{icon:"published_with_changes",color:"info",size:"sm",dense:""},on:{click:function(t){return a.abrirModalAlterarStatus(e.row)}}},[t("q-tooltip",{attrs:{anchor:"center left",self:"center right"}},[a._v("\n                Editar pedido do cliente\n              ")])],1)],1)])]}},{key:"body-cell-info",fn:function(e){return[t("q-td",{attrs:{props:e}},[t("div",[t("q-btn",{attrs:{icon:"person",color:"info",size:"sm",dense:""},on:{click:function(t){return a.abrirModalInfoCliente(e.row)}}},[t("q-tooltip",{attrs:{anchor:"center left",self:"center right"}},[a._v("\n                Informações do cliente\n              ")])],1)],1)])]}},{key:"body-cell-feedback",fn:function(e){return[t("q-td",{attrs:{props:e}},[t("div",[""!==e.row.observacoes&&"Compra total"===e.row.status||"Finalizado"===e.row.status?t("q-btn",{attrs:{icon:"chat",color:"secondary",size:"sm",dense:""},on:{click:function(t){return a.abrirModalFeedback(e.row.id)}}},[t("q-tooltip",{attrs:{anchor:"center left",self:"center right"}},[a._v("\n                Possui feedback do cliente\n              ")])],1):t("q-btn",{attrs:{icon:"chat",color:"grey",size:"sm",dense:"",disable:""}})],1)])]}},{key:"body-cell-itensBag",fn:function(e){return[t("q-td",{attrs:{props:e}},[t("div",[t("q-btn",{staticClass:"text-red",attrs:{icon:"work",color:"white",size:"sm",dense:""},on:{click:function(t){return a.itensBag(e.row)}}},[t("q-tooltip",{attrs:{anchor:"center left",self:"center right"}},[a._v("\n                Itens da Bag do cliente\n              ")])],1)],1)])]}}])})],1),t("q-dialog",{model:{value:a.modalAlterarStatus,callback:function(e){a.modalAlterarStatus=e},expression:"modalAlterarStatus"}},[t("q-card",{staticStyle:{width:"400px","max-width":"80vw"}},[t("q-card-section",[t("div",{staticClass:"text-h6"},[a._v("Alterar Status ou Valor da Bag")])]),t("div",{staticClass:"q-pa-md"},[t("div",{staticClass:"q-gutter-y-md",staticStyle:{"max-width":"300px"}},[t("q-select",{attrs:{color:"purple-12",options:a.options,label:"Escolha status"},model:{value:a.novoStatusBag,callback:function(e){a.novoStatusBag=e},expression:"novoStatusBag"}})],1),t("div",{staticClass:"q-gutter-y-md q-mt-sm",staticStyle:{"max-width":"300px"}},[t("q-input",{attrs:{color:"purple-12",label:"Valor Bag"},model:{value:a.novoValorBag,callback:function(e){a.novoValorBag=e},expression:"novoValorBag"}})],1)]),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Salvar",color:"primary"},on:{click:function(e){return a.alterarBag()}}}),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1),t("q-dialog",{model:{value:a.modalInfoCliente,callback:function(e){a.modalInfoCliente=e},expression:"modalInfoCliente"}},[t("q-card",{staticStyle:{width:"600px","max-width":"80vw"}},[t("div",{staticClass:"q-pa-md"},[t("q-item-label",{staticClass:"text-h5 text-center"},[a._v("\n          Informações do cliente\n        ")]),t("div",{staticClass:"q-mt-lg"},[t("q-item-label",{staticClass:"text-h6"},[a._v("\n          Dados Pessoais\n        ")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-input",{staticClass:"q-mr-lg",attrs:{readonly:"",label:"Nome completo"},model:{value:a.cadastroPerfil.nome,callback:function(e){a.$set(a.cadastroPerfil,"nome",e)},expression:"cadastroPerfil.nome"}})],1),t("div",{staticClass:"col"},[t("q-input",{attrs:{readonly:"",label:"E-mail"},model:{value:a.cadastroPerfil.email,callback:function(e){a.$set(a.cadastroPerfil,"email",e)},expression:"cadastroPerfil.email"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-input",{staticClass:"q-mr-lg",attrs:{readonly:"",label:"CPF",mask:"###.###.###-##"},model:{value:a.cadastroPerfil.cpf,callback:function(e){a.$set(a.cadastroPerfil,"cpf",e)},expression:"cadastroPerfil.cpf"}})],1),t("div",{staticClass:"col"},[t("q-input",{attrs:{readonly:"",label:"Data de nascimento",mask:"##/##/####"},model:{value:a.cadastroPerfil.dat_nasc,callback:function(e){a.$set(a.cadastroPerfil,"dat_nasc",e)},expression:"cadastroPerfil.dat_nasc"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-input",{staticClass:"q-mr-lg",attrs:{readonly:"",label:"Celular principal",mask:"(##) ##### - ####"},model:{value:a.cadastroPerfil.tel_cel1,callback:function(e){a.$set(a.cadastroPerfil,"tel_cel1",e)},expression:"cadastroPerfil.tel_cel1"}})],1),t("div",{staticClass:"col"},[t("q-input",{attrs:{readonly:"",label:"Celular secundário",mask:"(##) ##### - ####"},model:{value:a.cadastroPerfil.tel_cel2,callback:function(e){a.$set(a.cadastroPerfil,"tel_cel2",e)},expression:"cadastroPerfil.tel_cel2"}})],1)])],1)],1),t("div",{staticClass:"q-pa-md"},[t("q-item-label",{staticClass:"text-h6"},[a._v("\n        Endereco\n      ")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-input",{staticClass:"q-mr-lg",attrs:{readonly:"",label:"CEP",mask:"#####-###",pattern:"[a-zA-Z0-9]+"},model:{value:a.cadastroEndereco.cep,callback:function(e){a.$set(a.cadastroEndereco,"cep",e)},expression:"cadastroEndereco.cep"}})],1),t("div",{staticClass:"col"},[t("q-input",{attrs:{readonly:"",label:"UF"},model:{value:a.cadastroEndereco.uf,callback:function(e){a.$set(a.cadastroEndereco,"uf",e)},expression:"cadastroEndereco.uf"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-input",{staticClass:"q-mr-lg",attrs:{readonly:"",label:"Cidade"},model:{value:a.cadastroEndereco.cidade,callback:function(e){a.$set(a.cadastroEndereco,"cidade",e)},expression:"cadastroEndereco.cidade"}})],1),t("div",{staticClass:"col"},[t("q-input",{attrs:{readonly:"",label:"Bairro"},model:{value:a.cadastroEndereco.bairro,callback:function(e){a.$set(a.cadastroEndereco,"bairro",e)},expression:"cadastroEndereco.bairro"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-input",{staticClass:"q-mr-lg",attrs:{readonly:"",label:"Rua"},model:{value:a.cadastroEndereco.rua,callback:function(e){a.$set(a.cadastroEndereco,"rua",e)},expression:"cadastroEndereco.rua"}})],1),t("div",{staticClass:"col"},[t("q-input",{attrs:{readonly:"",label:"Número"},model:{value:a.cadastroEndereco.numero,callback:function(e){a.$set(a.cadastroEndereco,"numero",e)},expression:"cadastroEndereco.numero"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-input",{staticClass:"q-mr-lg",attrs:{readonly:"",label:"Complemento"},model:{value:a.cadastroEndereco.complemento,callback:function(e){a.$set(a.cadastroEndereco,"complemento",e)},expression:"cadastroEndereco.complemento"}})],1),t("div",{staticClass:"col"},[t("q-input",{attrs:{readonly:"",label:"Observações"},model:{value:a.cadastroEndereco.observacoes,callback:function(e){a.$set(a.cadastroEndereco,"observacoes",e)},expression:"cadastroEndereco.observacoes"}})],1)])],1),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Fechar",color:"primary"}})],1)],1)],1),t("q-dialog",{model:{value:a.modalFeedback,callback:function(e){a.modalFeedback=e},expression:"modalFeedback"}},[t("q-card",[t("q-card-section",[t("div",{staticClass:"text-h6"},[a._v("Feedback do cliente")])]),t("div",{staticClass:"q-pa-md",staticStyle:{width:"480px"}},[t("q-input",{attrs:{filled:"",clearable:"",type:"textarea",color:"red-12",readonly:""},model:{value:a.textFeedback,callback:function(e){a.textFeedback=e},expression:"textFeedback"}})],1),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}})],1)],1)],1)],1)},o=[],l=(t("5319"),t("bc3a")),r=t.n(l);const i={nome:"",email:"",cpf:"",identificacao:"null",tel_cel1:"",tel_cel2:"",dat_nasc:"",status:"ativo",pontuacao:"5"},c={rua:"",numero:"",bairro:"",cidade:"",uf:"",cep:"",complemento:"",observacoes:""};var n={name:"minhasBags",data:()=>({token:localStorage.getItem("token"),baseUrl:"https://power-bag-back.herokuapp.com",confirm:!1,modalCartao:!1,columns:[{name:"nome",label:"Nome do cliente",field:"nomeCliente",sortable:!0,align:"center",headerClasses:"bg-primary text-white text-uppercase text-bold "},{name:"data",label:"Data",field:"createdAt",sortable:!0,type:"date",align:"center",headerClasses:"bg-primary text-white text-uppercase",format:a=>`${a.replace(/(\d*)-(\d*)-(\d*).*/,"$3-$2-$1")}`},{name:"status",label:"Status",field:"status",sortable:!0,align:"center",headerClasses:"bg-primary text-white text-uppercase text-bold"},{name:"valor",label:"Valor",field:"valor",sortable:!0,align:"center",headerClasses:"bg-primary text-white text-uppercase text-bold"},{name:"info",label:"Info cliente",align:"center",headerClasses:"bg-primary text-white text-uppercase text-bold "},{name:"editarPedido",label:"Editar pedido",align:"center",headerClasses:"bg-primary text-white text-uppercase text-bold "},{name:"itensBag",label:"Itens Bag",align:"center",headerClasses:"bg-primary text-white text-uppercase text-bold "},{name:"feedback",label:"Feedback",align:"center",width:"auto",headerClasses:"bg-primary text-white text-uppercase text-bold "}],bag:[],nomeCliente:"",cadastroPerfil:i,cadastroEndereco:c,model:null,options:["Em separação","Enviado","Recebido","Verificando peças","Finalizado","Compra total","Cancelado"],selected:[],modalAlterarStatus:!1,modalInfoCliente:!1,modalFeedback:!1,idBagAtual:null,novoStatusBag:null,novoValorBag:null,clienteId:null,nome:null,textFeedback:"",usuarioLogado:null}),mounted(){this.buscarBags(),this.confirmarUsuarioAdmin()},methods:{confirmarPedido(){this.confirm=!0},async buscarBags(){const a=await r()({method:"GET",url:`${this.baseUrl}/bag/all`,headers:{Authorization:`${this.token}`}});this.bag=a.data.map((a=>Object.assign(a,{nomeCliente:a.cliente.nome,emailCliente:a.cliente.email})))},abrirModalAlterarStatus(a){this.modalAlterarStatus=!0,this.idBagAtual=a.id,this.novoStatusBag=a.status,this.novoValorBag=a.valor},async abrirModalInfoCliente(a){this.modalInfoCliente=!0,this.clienteId=a.cliente_id;const e=await r()({method:"GET",url:`${this.baseUrl}/cliente/${this.clienteId}`,headers:{Authorization:`${this.token}`}});this.cadastroPerfil=Object.assign(e.data),this.cadastroEndereco=Object.assign(e.data.endereco)},alterarBag(){r()({method:"PUT",url:`${this.baseUrl}/bag`,headers:{Authorization:`${this.token}`},data:{valor:this.novoValorBag,status:this.novoStatusBag,id_bag:this.idBagAtual}}),setTimeout((()=>{this.$q.dialog({title:"Atenção!",message:"O status da bag foi alterado com sucesso!"}),this.idBagAtual="",this.novoStatusBag="",this.novoValorBag="",this.buscarBags()}),500)},async abrirModalFeedback(a){this.modalFeedback=!0,this.clienteId=a.cliente_id,this.idBagAtual=a;const e=await r()({method:"GET",url:`${this.baseUrl}/bag/all`,headers:{Authorization:`${this.token}`}}),t=Object.assign(e.data),s=t.filter((e=>e.id==a));this.textFeedback=s[0].observacoes},itensBag(a){this.idBagAtual=a.id;let e=`${this.baseUrl}/bag/${this.idBagAtual}/itens`;window.open(e,"_blank")},confirmarUsuarioAdmin(){this.usuarioLogado=localStorage.getItem("admin"),console.log(this.usuarioLogado),"false"===this.usuarioLogado&&(this.$q.dialog({title:"Atenção",message:"Usuário não possui permissão para pagina!"}),localStorage.clear(),this.$router.push({name:"home"}))}}},d=n,u=t("2877"),m=t("eaac"),p=t("db86"),b=t("9c40"),f=t("05c0"),h=t("24e8"),g=t("f09f"),v=t("a370"),C=t("ddd8"),q=t("27f9"),x=t("4b7e"),k=t("0170"),w=t("7f67"),y=t("eebe"),E=t.n(y),B=Object(u["a"])(d,s,o,!1,null,null,null);e["default"]=B.exports;E()(B,"components",{QTable:m["a"],QTd:p["a"],QBtn:b["a"],QTooltip:f["a"],QDialog:h["a"],QCard:g["a"],QCardSection:v["a"],QSelect:C["a"],QInput:q["a"],QCardActions:x["a"],QItemLabel:k["a"]}),E()(B,"directives",{ClosePopup:w["a"]})}}]);